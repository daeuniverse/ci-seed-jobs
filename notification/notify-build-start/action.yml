---
name: Notify build start
description: Send notification to Telegram channel to notify build has started
# Map input vars to job
inputs:
  telegram_to:
    required: true
  telegram_token:
    required: true
  git_sha_long:
    required: true
    type: string
  git_sha_short:
    required: true
    type: string
  git_commit_msg:
    required: true
    type: string

runs:
  using: composite
  steps:
    - name: Send telegram message when build kicks off
      uses: appleboy/telegram-action@master
      with:
        to: ${{ inputs.telegram_to }}
        token: ${{ inputs.telegram_token }}
        format: markdown
        message: |
          ðŸ”¨ ${{ github.actor }} pushed a new commit: ${{ inputs.git_sha_short }} to [${{ github.repository }}](https://github.com/${{ github.repository }}) - [#${{ github.run_number }}](https://github.com/daeuniverse/${{ github.repository }}/actions/runs/${{ github.run_id }})

          [${{ inputs.git_sha_short }}](https://github.com/${{ github.repository }}/commit/${{ github.sha }}): ${{ inputs.git_commit_msg }} by [${{ github.actor }}](https://http://github.com/yqlbu)

